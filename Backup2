--
-- PostgreSQL database dump
--

-- Dumped from database version 17.5
-- Dumped by pg_dump version 17.4

-- Started on 2025-05-25 14:47:14

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 2 (class 3079 OID 16730)
-- Name: pgcrypto; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS pgcrypto WITH SCHEMA public;


--
-- TOC entry 4969 (class 0 OID 0)
-- Dependencies: 2
-- Name: EXTENSION pgcrypto; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION pgcrypto IS 'cryptographic functions';


--
-- TOC entry 902 (class 1247 OID 16418)
-- Name: account_status; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.account_status AS ENUM (
    'active',
    'closed',
    'frozen'
);


ALTER TYPE public.account_status OWNER TO postgres;

--
-- TOC entry 899 (class 1247 OID 16410)
-- Name: account_type; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.account_type AS ENUM (
    'debit',
    'deposit',
    'credit'
);


ALTER TYPE public.account_type OWNER TO postgres;

--
-- TOC entry 905 (class 1247 OID 16426)
-- Name: transaction_status; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.transaction_status AS ENUM (
    'pending',
    'completed',
    'failed',
    'reversed'
);


ALTER TYPE public.transaction_status OWNER TO postgres;

--
-- TOC entry 908 (class 1247 OID 16436)
-- Name: user_type; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.user_type AS ENUM (
    'admin',
    'manager',
    'client'
);


ALTER TYPE public.user_type OWNER TO postgres;

--
-- TOC entry 234 (class 1255 OID 16584)
-- Name: update_timestamp(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.update_timestamp() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_timestamp() OWNER TO postgres;

--
-- TOC entry 233 (class 1255 OID 16576)
-- Name: update_updated_at_column(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.update_updated_at_column() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_updated_at_column() OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 227 (class 1259 OID 16646)
-- Name: account; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.account (
    accountid integer NOT NULL,
    clientid integer NOT NULL,
    balance numeric(15,2) DEFAULT 0.00 NOT NULL,
    interestrate numeric(5,2) NOT NULL,
    account_type text NOT NULL,
    status text DEFAULT 'active'::text NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT account_account_type_check CHECK ((account_type = ANY (ARRAY['debit'::text, 'deposit'::text, 'credit'::text]))),
    CONSTRAINT account_status_check CHECK ((status = ANY (ARRAY['active'::text, 'closed'::text, 'frozen'::text])))
);


ALTER TABLE public.account OWNER TO postgres;

--
-- TOC entry 226 (class 1259 OID 16645)
-- Name: account_accountid_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.account_accountid_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.account_accountid_seq OWNER TO postgres;

--
-- TOC entry 4970 (class 0 OID 0)
-- Dependencies: 226
-- Name: account_accountid_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.account_accountid_seq OWNED BY public.account.accountid;


--
-- TOC entry 219 (class 1259 OID 16586)
-- Name: admin; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.admin (
    adminid integer NOT NULL,
    name_admin character varying(50) NOT NULL,
    password_hash character varying(255) NOT NULL,
    email character varying(100) NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.admin OWNER TO postgres;

--
-- TOC entry 218 (class 1259 OID 16585)
-- Name: admin_adminid_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.admin_adminid_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.admin_adminid_seq OWNER TO postgres;

--
-- TOC entry 4971 (class 0 OID 0)
-- Dependencies: 218
-- Name: admin_adminid_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.admin_adminid_seq OWNED BY public.admin.adminid;


--
-- TOC entry 221 (class 1259 OID 16598)
-- Name: bank; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.bank (
    bank_id integer NOT NULL,
    name_bank character varying(100) NOT NULL,
    depositrate numeric(5,2) NOT NULL,
    creditfee numeric(5,2) NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.bank OWNER TO postgres;

--
-- TOC entry 220 (class 1259 OID 16597)
-- Name: bank_bank_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.bank_bank_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.bank_bank_id_seq OWNER TO postgres;

--
-- TOC entry 4972 (class 0 OID 0)
-- Dependencies: 220
-- Name: bank_bank_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.bank_bank_id_seq OWNED BY public.bank.bank_id;


--
-- TOC entry 225 (class 1259 OID 16628)
-- Name: client; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.client (
    client_id integer NOT NULL,
    first_nameclient character varying(50) NOT NULL,
    lastnameclient character varying(50) NOT NULL,
    ageclient integer,
    address character varying(255) NOT NULL,
    passportnumber character varying(20) NOT NULL,
    passportseries character varying(20) NOT NULL,
    bank_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT client_ageclient_check CHECK ((ageclient >= 18))
);


ALTER TABLE public.client OWNER TO postgres;

--
-- TOC entry 224 (class 1259 OID 16627)
-- Name: client_client_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.client_client_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.client_client_id_seq OWNER TO postgres;

--
-- TOC entry 4973 (class 0 OID 0)
-- Dependencies: 224
-- Name: client_client_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.client_client_id_seq OWNED BY public.client.client_id;


--
-- TOC entry 230 (class 1259 OID 16690)
-- Name: creditaccount; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.creditaccount (
    account_id integer NOT NULL,
    creditlimit numeric(15,2) NOT NULL,
    overdraftfee numeric(5,2) NOT NULL,
    min_payment numeric(15,2) NOT NULL,
    payment_due_day integer,
    CONSTRAINT creditaccount_payment_due_day_check CHECK (((payment_due_day >= 1) AND (payment_due_day <= 28)))
);


ALTER TABLE public.creditaccount OWNER TO postgres;

--
-- TOC entry 228 (class 1259 OID 16667)
-- Name: debitaccount; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.debitaccount (
    account_id integer NOT NULL,
    statdata timestamp without time zone NOT NULL,
    enddata timestamp without time zone,
    initialamount numeric(15,2) NOT NULL,
    monthly_fee numeric(10,2) DEFAULT 0.00
);


ALTER TABLE public.debitaccount OWNER TO postgres;

--
-- TOC entry 229 (class 1259 OID 16678)
-- Name: depositaccount; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.depositaccount (
    account_id integer NOT NULL,
    statdata timestamp without time zone NOT NULL,
    enddata timestamp without time zone NOT NULL,
    initialamount numeric(15,2) NOT NULL,
    capitalization boolean DEFAULT false,
    early_withdrawal_penalty numeric(5,2) DEFAULT 0.00
);


ALTER TABLE public.depositaccount OWNER TO postgres;

--
-- TOC entry 223 (class 1259 OID 16610)
-- Name: manager; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.manager (
    managerid integer NOT NULL,
    name_manager character varying(50) NOT NULL,
    accesslevel integer NOT NULL,
    bank_id integer NOT NULL,
    password_hash character varying(255) NOT NULL,
    email character varying(100) NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT manager_accesslevel_check CHECK (((accesslevel >= 1) AND (accesslevel <= 3)))
);


ALTER TABLE public.manager OWNER TO postgres;

--
-- TOC entry 222 (class 1259 OID 16609)
-- Name: manager_managerid_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.manager_managerid_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.manager_managerid_seq OWNER TO postgres;

--
-- TOC entry 4974 (class 0 OID 0)
-- Dependencies: 222
-- Name: manager_managerid_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.manager_managerid_seq OWNED BY public.manager.managerid;


--
-- TOC entry 232 (class 1259 OID 16702)
-- Name: transaction; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.transaction (
    transactionid integer NOT NULL,
    fromaccountid integer,
    toaccountid integer NOT NULL,
    amount numeric(15,2) NOT NULL,
    date timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    status text DEFAULT 'pending'::text NOT NULL,
    description character varying(255),
    reference_number character varying(50),
    CONSTRAINT transaction_amount_check CHECK ((amount > (0)::numeric)),
    CONSTRAINT transaction_status_check CHECK ((status = ANY (ARRAY['pending'::text, 'completed'::text, 'failed'::text, 'reversed'::text])))
);


ALTER TABLE public.transaction OWNER TO postgres;

--
-- TOC entry 231 (class 1259 OID 16701)
-- Name: transaction_transactionid_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.transaction_transactionid_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.transaction_transactionid_seq OWNER TO postgres;

--
-- TOC entry 4975 (class 0 OID 0)
-- Dependencies: 231
-- Name: transaction_transactionid_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.transaction_transactionid_seq OWNED BY public.transaction.transactionid;


--
-- TOC entry 4741 (class 2604 OID 16649)
-- Name: account accountid; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.account ALTER COLUMN accountid SET DEFAULT nextval('public.account_accountid_seq'::regclass);


--
-- TOC entry 4729 (class 2604 OID 16589)
-- Name: admin adminid; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.admin ALTER COLUMN adminid SET DEFAULT nextval('public.admin_adminid_seq'::regclass);


--
-- TOC entry 4732 (class 2604 OID 16601)
-- Name: bank bank_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bank ALTER COLUMN bank_id SET DEFAULT nextval('public.bank_bank_id_seq'::regclass);


--
-- TOC entry 4738 (class 2604 OID 16631)
-- Name: client client_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.client ALTER COLUMN client_id SET DEFAULT nextval('public.client_client_id_seq'::regclass);


--
-- TOC entry 4735 (class 2604 OID 16613)
-- Name: manager managerid; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.manager ALTER COLUMN managerid SET DEFAULT nextval('public.manager_managerid_seq'::regclass);


--
-- TOC entry 4749 (class 2604 OID 16705)
-- Name: transaction transactionid; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaction ALTER COLUMN transactionid SET DEFAULT nextval('public.transaction_transactionid_seq'::regclass);


--
-- TOC entry 4958 (class 0 OID 16646)
-- Dependencies: 227
-- Data for Name: account; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.account (accountid, clientid, balance, interestrate, account_type, status, created_at, updated_at) FROM stdin;
1	1	5000.00	2.50	debit	active	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
2	1	10000.00	3.00	deposit	active	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
3	2	2000.00	5.00	credit	active	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
4	3	7500.00	2.75	debit	active	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
5	4	15000.00	3.50	deposit	active	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
6	5	3000.00	4.75	credit	frozen	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
7	6	8000.00	2.60	debit	active	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
8	7	12000.00	3.25	deposit	active	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
\.


--
-- TOC entry 4950 (class 0 OID 16586)
-- Dependencies: 219
-- Data for Name: admin; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.admin (adminid, name_admin, password_hash, email, created_at, updated_at) FROM stdin;
1	John Admin	$2a$06$E76RXqjgscHoiT3o4Ktn3eAjxzey9wfbHj4wcbTs1n/WwfGMRkcHG	john.admin@bank.com	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
\.


--
-- TOC entry 4952 (class 0 OID 16598)
-- Dependencies: 221
-- Data for Name: bank; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.bank (bank_id, name_bank, depositrate, creditfee, created_at, updated_at) FROM stdin;
1	Alpha Bank	3.50	5.00	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
2	Beta Bank	4.00	4.75	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
3	Gamma Bank	3.75	5.25	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
4	Delta Bank	4.25	4.50	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
5	Epsilon Bank	3.90	5.10	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
\.


--
-- TOC entry 4956 (class 0 OID 16628)
-- Dependencies: 225
-- Data for Name: client; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.client (client_id, first_nameclient, lastnameclient, ageclient, address, passportnumber, passportseries, bank_id, created_at, updated_at) FROM stdin;
1	Michael Lee	Johnson	30	123 Main St	1234567890	AB123	1	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
2	Sarah Kim	Park	25	456 Oak Ave	2345678901	CD456	1	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
3	James Chen	Wang	40	789 Pine Rd	3456789012	EF789	2	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
4	Laura Martinez	Gomez	28	101 Elm St	4567890123	GH012	3	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
5	Robert Taylor	Moore	35	202 Birch Ln	5678901234	IJ345	4	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
6	Emily Clark	Lewis	22	303 Cedar Dr	6789012345	KL678	5	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
7	Daniel Walker	Hall	45	404 Maple Ave	7890123456	MN901	1	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
8	Sophia Young	Allen	29	505 Spruce St	8901234567	OP234	2	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
\.


--
-- TOC entry 4961 (class 0 OID 16690)
-- Dependencies: 230
-- Data for Name: creditaccount; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.creditaccount (account_id, creditlimit, overdraftfee, min_payment, payment_due_day) FROM stdin;
3	5000.00	25.00	100.00	15
6	7000.00	30.00	150.00	20
\.


--
-- TOC entry 4959 (class 0 OID 16667)
-- Dependencies: 228
-- Data for Name: debitaccount; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.debitaccount (account_id, statdata, enddata, initialamount, monthly_fee) FROM stdin;
1	2025-01-01 10:00:00	\N	5000.00	10.00
4	2025-02-01 12:00:00	\N	7500.00	15.00
7	2025-03-01 14:00:00	\N	8000.00	12.50
\.


--
-- TOC entry 4960 (class 0 OID 16678)
-- Dependencies: 229
-- Data for Name: depositaccount; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.depositaccount (account_id, statdata, enddata, initialamount, capitalization, early_withdrawal_penalty) FROM stdin;
2	2025-01-15 09:00:00	2026-01-15 09:00:00	10000.00	t	1.50
5	2025-02-15 11:00:00	2026-02-15 11:00:00	15000.00	f	2.00
8	2025-03-15 13:00:00	2026-03-15 13:00:00	12000.00	t	1.75
\.


--
-- TOC entry 4954 (class 0 OID 16610)
-- Dependencies: 223
-- Data for Name: manager; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.manager (managerid, name_manager, accesslevel, bank_id, password_hash, email, created_at, updated_at) FROM stdin;
1	Alice Smith	1	1	$2a$06$wHpeV8XAfIMe1vUCLwevwuZa8obJTKSk8ZYa4RvHc/S9S1mSaf4KG	alice.smith@bank.com	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
2	Bob Johnson	2	1	$2a$06$bM2ZY1pmHZYSPg.WOtxn0e9pN8.2WqZFfpgTGdXSES4H5r4tQ/E3O	bob.johnson@bank.com	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
3	Carol White	3	2	$2a$06$OCRQGLNEuHn76CNmZPTMzeC03NcJBewcZnbWheWYNizLQjvF.fMSO	carol.white@bank.com	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
4	David Brown	1	3	$2a$06$KKN.RlsLavrhknT18BIKCuJhwvdYYfVpZ2vVgZ7qFp.lIigOz/nBa	david.brown@bank.com	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
5	Emma Davis	2	4	$2a$06$f75iY29Ro/15bQHKazgKsenzIi54UcfsDASZYc9h5eGou.E.5d7n6	emma.davis@bank.com	2025-05-22 11:37:40.472209	2025-05-22 11:37:40.472209
\.


--
-- TOC entry 4963 (class 0 OID 16702)
-- Dependencies: 232
-- Data for Name: transaction; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.transaction (transactionid, fromaccountid, toaccountid, amount, date, status, description, reference_number) FROM stdin;
1	1	2	1000.00	2025-05-01 08:00:00	completed	Transfer to deposit	TXN001
2	2	3	500.00	2025-05-02 09:00:00	pending	Credit payment	TXN002
3	3	4	2000.00	2025-05-03 10:00:00	completed	Account transfer	TXN003
4	4	5	1500.00	2025-05-04 11:00:00	failed	Insufficient funds	TXN004
5	5	1	3000.00	2025-05-05 12:00:00	reversed	Reversed transfer	TXN005
\.


--
-- TOC entry 4976 (class 0 OID 0)
-- Dependencies: 226
-- Name: account_accountid_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.account_accountid_seq', 8, true);


--
-- TOC entry 4977 (class 0 OID 0)
-- Dependencies: 218
-- Name: admin_adminid_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.admin_adminid_seq', 2, true);


--
-- TOC entry 4978 (class 0 OID 0)
-- Dependencies: 220
-- Name: bank_bank_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.bank_bank_id_seq', 5, true);


--
-- TOC entry 4979 (class 0 OID 0)
-- Dependencies: 224
-- Name: client_client_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.client_client_id_seq', 8, true);


--
-- TOC entry 4980 (class 0 OID 0)
-- Dependencies: 222
-- Name: manager_managerid_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.manager_managerid_seq', 5, true);


--
-- TOC entry 4981 (class 0 OID 0)
-- Dependencies: 231
-- Name: transaction_transactionid_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.transaction_transactionid_seq', 5, true);


--
-- TOC entry 4776 (class 2606 OID 16659)
-- Name: account account_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.account
    ADD CONSTRAINT account_pkey PRIMARY KEY (accountid);


--
-- TOC entry 4760 (class 2606 OID 16595)
-- Name: admin admin_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.admin
    ADD CONSTRAINT admin_email_key UNIQUE (email);


--
-- TOC entry 4762 (class 2606 OID 16593)
-- Name: admin admin_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.admin
    ADD CONSTRAINT admin_pkey PRIMARY KEY (adminid);


--
-- TOC entry 4764 (class 2606 OID 16607)
-- Name: bank bank_name_bank_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bank
    ADD CONSTRAINT bank_name_bank_key UNIQUE (name_bank);


--
-- TOC entry 4766 (class 2606 OID 16605)
-- Name: bank bank_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bank
    ADD CONSTRAINT bank_pkey PRIMARY KEY (bank_id);


--
-- TOC entry 4772 (class 2606 OID 16636)
-- Name: client client_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.client
    ADD CONSTRAINT client_pkey PRIMARY KEY (client_id);


--
-- TOC entry 4783 (class 2606 OID 16695)
-- Name: creditaccount creditaccount_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.creditaccount
    ADD CONSTRAINT creditaccount_pkey PRIMARY KEY (account_id);


--
-- TOC entry 4779 (class 2606 OID 16672)
-- Name: debitaccount debitaccount_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.debitaccount
    ADD CONSTRAINT debitaccount_pkey PRIMARY KEY (account_id);


--
-- TOC entry 4781 (class 2606 OID 16684)
-- Name: depositaccount depositaccount_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.depositaccount
    ADD CONSTRAINT depositaccount_pkey PRIMARY KEY (account_id);


--
-- TOC entry 4768 (class 2606 OID 16620)
-- Name: manager manager_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.manager
    ADD CONSTRAINT manager_email_key UNIQUE (email);


--
-- TOC entry 4770 (class 2606 OID 16618)
-- Name: manager manager_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.manager
    ADD CONSTRAINT manager_pkey PRIMARY KEY (managerid);


--
-- TOC entry 4788 (class 2606 OID 16713)
-- Name: transaction transaction_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT transaction_pkey PRIMARY KEY (transactionid);


--
-- TOC entry 4790 (class 2606 OID 16715)
-- Name: transaction transaction_reference_number_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT transaction_reference_number_key UNIQUE (reference_number);


--
-- TOC entry 4774 (class 2606 OID 16638)
-- Name: client unique_passport; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.client
    ADD CONSTRAINT unique_passport UNIQUE (passportnumber, passportseries);


--
-- TOC entry 4777 (class 1259 OID 16666)
-- Name: idx_account_client; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_account_client ON public.account USING btree (clientid);


--
-- TOC entry 4784 (class 1259 OID 16728)
-- Name: idx_transaction_date; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_transaction_date ON public.transaction USING btree (date);


--
-- TOC entry 4785 (class 1259 OID 16726)
-- Name: idx_transaction_from; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_transaction_from ON public.transaction USING btree (fromaccountid);


--
-- TOC entry 4786 (class 1259 OID 16727)
-- Name: idx_transaction_to; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_transaction_to ON public.transaction USING btree (toaccountid);


--
-- TOC entry 4803 (class 2620 OID 16665)
-- Name: account update_account_timestamp; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_account_timestamp BEFORE UPDATE ON public.account FOR EACH ROW EXECUTE FUNCTION public.update_timestamp();


--
-- TOC entry 4799 (class 2620 OID 16596)
-- Name: admin update_admin_timestamp; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_admin_timestamp BEFORE UPDATE ON public.admin FOR EACH ROW EXECUTE FUNCTION public.update_timestamp();


--
-- TOC entry 4800 (class 2620 OID 16608)
-- Name: bank update_bank_timestamp; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_bank_timestamp BEFORE UPDATE ON public.bank FOR EACH ROW EXECUTE FUNCTION public.update_timestamp();


--
-- TOC entry 4802 (class 2620 OID 16644)
-- Name: client update_client_timestamp; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_client_timestamp BEFORE UPDATE ON public.client FOR EACH ROW EXECUTE FUNCTION public.update_timestamp();


--
-- TOC entry 4801 (class 2620 OID 16626)
-- Name: manager update_manager_timestamp; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_manager_timestamp BEFORE UPDATE ON public.manager FOR EACH ROW EXECUTE FUNCTION public.update_timestamp();


--
-- TOC entry 4793 (class 2606 OID 16660)
-- Name: account account_clientid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.account
    ADD CONSTRAINT account_clientid_fkey FOREIGN KEY (clientid) REFERENCES public.client(client_id) ON DELETE CASCADE;


--
-- TOC entry 4792 (class 2606 OID 16639)
-- Name: client client_bank_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.client
    ADD CONSTRAINT client_bank_id_fkey FOREIGN KEY (bank_id) REFERENCES public.bank(bank_id) ON DELETE CASCADE;


--
-- TOC entry 4796 (class 2606 OID 16696)
-- Name: creditaccount creditaccount_account_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.creditaccount
    ADD CONSTRAINT creditaccount_account_id_fkey FOREIGN KEY (account_id) REFERENCES public.account(accountid) ON DELETE CASCADE;


--
-- TOC entry 4794 (class 2606 OID 16673)
-- Name: debitaccount debitaccount_account_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.debitaccount
    ADD CONSTRAINT debitaccount_account_id_fkey FOREIGN KEY (account_id) REFERENCES public.account(accountid) ON DELETE CASCADE;


--
-- TOC entry 4795 (class 2606 OID 16685)
-- Name: depositaccount depositaccount_account_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.depositaccount
    ADD CONSTRAINT depositaccount_account_id_fkey FOREIGN KEY (account_id) REFERENCES public.account(accountid) ON DELETE CASCADE;


--
-- TOC entry 4791 (class 2606 OID 16621)
-- Name: manager manager_bank_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.manager
    ADD CONSTRAINT manager_bank_id_fkey FOREIGN KEY (bank_id) REFERENCES public.bank(bank_id) ON DELETE CASCADE;


--
-- TOC entry 4797 (class 2606 OID 16716)
-- Name: transaction transaction_fromaccountid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT transaction_fromaccountid_fkey FOREIGN KEY (fromaccountid) REFERENCES public.account(accountid) ON DELETE SET NULL;


--
-- TOC entry 4798 (class 2606 OID 16721)
-- Name: transaction transaction_toaccountid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaction
    ADD CONSTRAINT transaction_toaccountid_fkey FOREIGN KEY (toaccountid) REFERENCES public.account(accountid) ON DELETE CASCADE;


-- Completed on 2025-05-25 14:47:15

--
-- PostgreSQL database dump complete
--

